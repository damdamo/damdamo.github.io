<!DOCTYPE html> <html lang=" en "><head> <meta charset="utf-8"> <title>Damien Morard - Enjoy Programming (and even more...)</title> <meta http-equip="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="I share my passion about Computer Science and programming. You can find posts about my research, some tutorials in programming, or just sharing my knowledge. I particularly use the Swift language, created by Apple."> <link rel="stylesheet" href="/assets/css/main.css" /> <link rel="icon" href="/assets/img/favicon.ico" type="image/gif" sizes="16x16"> <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> <script async defer src="https://buttons.github.io/buttons.js"></script> <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet"> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"> <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous"> <!-- <script> (function(d, h, m){ var js, fjs = d.getElementsByTagName(h)[0]; if (d.getElementById(m)){return;} js = d.createElement(h); js.id = m; js.onload = function(){ window.makerWidgetComInit({ position: "right", widget: "ofeeof264otl2l5g-zspk40eq2gaomj2n-higi2qphmveubksi" })}; js.src = "https://makerwidget.com/js/embed.js"; fjs.parentNode.insertBefore(js, fjs) }(document, "script", "dhm")) </script> --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-7259836434848202", enable_page_level_ads: true }); </script> </head> <body> <div class="container-fluid"><header> <div class="col-lg-12"> <div class="row"> <div class="col-md-2 center"> <a href="/"> <img src="/assets/img/general/ma_tete.png" class="profile-img"> </a> </div> <div class="col-md-4 center"> <h1 class="profile-name"> Damien Morard</h1> <p class="profile-bio"> Enjoy Programming (and even more...)</p> <p class="profile-links"> <a class="social-link" href="http://medium.com/@dmorard1"> <i class="fab fa-medium-m"></i> </a> <a class="social-link" href="http://github.com/damdamo"> <i class="fab fa-github"></i> </a> <a class="social-link" href="http://linkedin.com/in/damienmorard"> <i class="fab fa-linkedin-in"></i> </a> </p> </div> <div class="col-md-6 center"> <ul class="nav justify-content-end" id="navigation"> </ul> <ul class="nav justify-content-end" id="navigation"><li class="nav-item"> <a class="nav-link" href="/blog">Blog</a> </li><li class="nav-item"> <a class="nav-link" href="/contact">Contact Me</a> </li><li class="nav-item"> <a class="nav-link" href="/">About</a> </li><li class="nav-item"> <a class="nav-link" href="/publications">Publications</a> </li></ul></div> </div> </div> </header> <div class="col-lg-12"> <!-- Blog Post Breadcrumbs --><nav aria-label="breadcrumb" role="navigation"> <ol class="breadcrumb"> <li class="breadcrumb-item"> <a href="/blog">Blog</a> </li> <li class="breadcrumb-item"> <a href="/blog/categories">Categories</a> </li> <li class="breadcrumb-item active" aria-current="page">Les closures, l'application partielle et la curryfication (Partie 3/3) (Swift)</li> </ol> </nav> <div class="row"> <div class="col-lg-8"><article class="card" itemscope itemtype="http://schema.org/BlogPosting"> <div class="card-header"> <!-- <h1 class="post-title" itemprop="name headline">Les closures, l'application partielle et la curryfication (Partie 3/3) (Swift)</h1> --> <h4 class="post-meta">La curryfication (ceci n'est pas commestible)</h4> <p class="post-summary">Posted by : <img src="/assets/img/general/ma_tete.png" class="author-profile-img"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Damien</span> </span> at <time datetime="2019-08-11 00:00:00 +0000" itemprop="datePublished">Aug 11, 2019</time> </p> <span class="disqus-comment-count" data-disqus-identifier="/tutorial/2019/08/11/curryfication.html"></span> <div class="post-categories"> Category : <a href="/blog/categories/tutorial">tutorial</a> </div> </div> <div class="card-body" itemprop="articleBody"> <img class="card-img-top" src="/assets/img/blog/poupee_russe.jpg" alt=""> <p>Si vous n’avez pas encore lu les deux précédentes parties, vous pouvez les retrouver ci-dessous:</p> <ul> <li><a href="../../../2019/08/09/closure-fr.html">Partie 1: Les closures</a> !</li> <li><a href="../../../2019/08/10/partial-application-fr.html">Partie 2: L’application partielle et précision sur les closures</a> Il est important de bien comprendre les notions abordés dans nos deux précédents chapitres !</li> </ul> <h2 id="la-curryfication">La curryfication</h2> <p>J’espère que vous êtes bien au clair avec les closures et l’application partielle vu que cette dernière partie va tout mettre à profit.</p> <p>La curryfication est le principe de prendre une fonction avec “<em>n</em>” paramètres et de la transformer en “<em>n</em>” fonctions avec chacune un argument.</p> <p>À l’inverse l’application partielle prend une fonction à “<em>n</em>” arguments et la transforme en “<em>m</em>” fonctions, avec “<em>m &lt;= n</em>” (Nous avons au plus autant de fonctions que d’arguments). Prenez le temps de relire ces phrase plusieurs fois si besoin.</p> <p>Vous vous souvenez de l’exemple du poids de la dernière partie ? Même si l’objectif n’était pas de curryfier notre fonction, c’est pourtant ce que nous avons fait.</p> <p>Si nous regardons juste en terme de signature de fonctions, voici un exemple: <code class="highlighter-rouge">(Int, Int) -&gt; Int</code> devient <code class="highlighter-rouge">(Int) -&gt; (Int) -&gt; Int</code></p> <p>Nous pouvons faire encore plus: <code class="highlighter-rouge">(Int, Int, Int) -&gt; Int</code> devient <code class="highlighter-rouge">(Int) -&gt; (Int) -&gt; (Int) -&gt; Int</code></p> <p>C’est bien joli mais je pense que vous voulez voir des exemples un peu plus concret.</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Version classique</span>
<span class="kd">func</span> <span class="nf">add</span><span class="p">(</span><span class="n">_</span> <span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="n">_</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">add</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">22</span><span class="p">))</span>

<span class="c1">// Version curry</span>
<span class="kd">func</span> <span class="nf">addCurry</span><span class="p">(</span><span class="n">_</span> <span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span><span class="n">y</span> <span class="k">in</span>
    <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">addCurry</span><span class="p">(</span><span class="mi">20</span><span class="p">)(</span><span class="mi">22</span><span class="p">))</span>
</code></pre></div></div> <p>La version classique est plus intuitive à réaliser de prime abord. La version “<em>addCurry</em>” reprend exactement toutes les notions abordées jusqu’à présent. Nous avons simplement décomposé le second argument de la fonction dans notre closure.</p> <p>Je vous montre aussi l’exemple à trois arguments tant que nous y sommes !</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">add</span><span class="p">(</span><span class="n">_</span> <span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="n">_</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="n">_</span> <span class="nv">z</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">add</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>

<span class="kd">func</span> <span class="nf">addCurry</span><span class="p">(</span><span class="n">_</span> <span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span><span class="n">y</span> <span class="k">in</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">z</span> <span class="k">in</span>
      <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">add</span><span class="p">(</span><span class="mi">10</span><span class="p">)(</span><span class="mi">10</span><span class="p">)(</span><span class="mi">22</span><span class="p">))</span>
</code></pre></div></div> <p>Nous prenons simplement chaque argument de la fonction “<em>add</em>” pour faire en sorte d’avoir des fonctions avec un unique argument.</p> <p>Le principe de curryfication peut s’appliquer dans les deux sens, nous pouvons prendre une fonction pour la curryfier ou la decurryfier.</p> <h3 id="différence-entre-application-partielle-et-curryfication">Différence entre application partielle et curryfication</h3> <p>Au final, nous pourrions croire que la curryfication est un cas particulier de l’application partielle mais il existe une différence qui sépare ces deux notions. L’application partielle n’a pas nécessité à avoir un type de retour, tandis que la curryfication retournera toujours une fonction à un argument jusqu’au dernier type de retour qui sera la valeur. Cette nuance est subtile mais à le mérite d’exister, mais nous ne sommes pas ici pour débattre plus en détail sur ce sujet.</p> <h3 id="avantage-de-la-curryfication">Avantage de la curryfication</h3> <p>Quand vous curryfier une fonction, vous la transformez en ce que nous appelons une fonction “<strong>pure</strong>”, possédant une propriété très intéressante. En effet les fonctions pures n’ont aucun effet de bord, c’est-à-dire qu’aucun comportement (mutation) non désirable dans le programme n’est possible.</p> <p>Vous avez les mêmes avantages qu’avec l’application partielle:</p> <ul> <li>Une meilleure décomposition du code</li> <li>Plus de clarté et de lisibilité du code</li> <li>La possibilité de déclarer des variables à différents niveaux de l’exécution.</li> <li>Vous pouvez plus facilement cibler à quel niveau vous désirez appliquer une modification.</li> </ul> <p>Je vous conseille vivement de tester par vous-même, c’est le meilleur moyen de vous en rendre compte.</p> <h3 id="conclusion">Conclusion</h3> <p>Nous arrivons à la fin de notre série de tutoriel sur les closures, l’application partielle et la curryfication. J’espère avoir démystifier ces principes, et surtout vous avoir apporté une meilleure compréhension globale sur le sujet.</p> <p>Je n’ai pas couvert tous les cas, et certains sujets méritent encore d’être explorés plus en profondeur. J’aurai l’occasion de revenir dans un article sur l’utilisation des closures dans les fonctions “<em>map</em>”, “<em>filter</em>” et “<em>reduce</em>”.</p> <p>Si vous avez des remarques / suggestions n’hésitez pas, je tâcherai de les prendre en compte au mieux.</p> <p>Merci de m’avoir lu et j’espère vous retrouver dans d’autres articles !</p> </div> </article> </div><div class="col-lg-4"> <div class="card"> <div class="card-header"> About Damien Morard </div> <div class="card-body text-dark"> <!-- Your Bio --> <p> Hey, my name is Damien. I am a PhD student at the University of Geneva and researcher in computer science. My research areas include semantics, modeling and verification. Currently, I am working on improving High-level Petri nets by adding a way to use functions as token. My goal is to reduce the semantic gap between an implementation and its model.</p> </div> </div> <div class="card"> <div class="card-header">Categories </div> <div class="card-body text-dark"> <div id="#personal"></div> <li class="tag-head"> <a href="/blog/categories/personal">personal</a> </li> <a name="personal"></a> <div id="#tutorial"></div> <li class="tag-head"> <a href="/blog/categories/tutorial">tutorial</a> </li> <a name="tutorial"></a> </div> </div> </div></div> <!-- End of row--> </div><footer> <p> Powered by<a href="https://devlopr.netlify.com/readme"> devlopr jekyll</a>. Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via <a href=" /feed.xml ">RSS</a> </p> </footer> <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> </div> </body> </html>
